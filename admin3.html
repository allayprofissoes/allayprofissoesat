<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Administrativo - Allay Profissões</title>
    <!-- Firebase SDK -->
    <script type="module" src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js"></script>
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- External CSS -->
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <h1 class="sidebar-title">Allay Admin</h1>
                <p class="sidebar-subtitle">Painel de Controle</p>
            </div>

            <div class="nav-section">
                    <h3 class="nav-section-title">Admnistração</h3>
                    <ul class="nav-list">
                        <li class="nav-item">
                              <a href="#" class="nav-link active" data-section="dashboard">
                                <i class="nav-icon fas fa-chart-line"></i>
                                Dashboard
                            </a>
                        </li>
                            <a href="#" class="nav-link" data-section="support-settings">
                                <i class="nav-icon fas fa-headset"></i>
                                Suporte
                            </a>
                        </li>

                         <li class="nav-item">
                            <a href="#" class="nav-link" data-section="notifications">
                                <i class="fas fa-bell"></i>
                                Notificações
                            </a>
                        </li>

                        <li class="nav-item">
                            <a href="#" class="nav-link" data-section="mudar">
                                <i class="fas fa-briefcase"></i>
                                Funcionários
                            </a>
                        </li>

                      <li class="nav-item">
                            <a href="#" class="nav-link" data-section="mudar">
                                <i class="fas fa-chalkboard-teacher"></i>
                                Professores
                            </a>
                        </li>
                         <li class="nav-item">
                            <a href="#" class="nav-link" data-section="privacy-policy">
                                <i class="fas fa-shield-alt"></i>
                                Políticas e Privacidade
                            </a>
                        </li>
                
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <h3 class="nav-section-title">Pedagógico</h3>
                    <ul class="nav-list">
                        <li class="nav-item">
                          
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-section="courses">
                                <i class="nav-icon fas fa-book"></i>
                                Cursos
                            </a>
                        </li>
                       
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-section="enrollment">
                                <i class="nav-icon fas fa-user-plus"></i>
                                Matrículas
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-section="students">
                                <i class="nav-icon fas fa-users"></i>
                                Alunos
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-section="indications-history">
                                <i class="nav-icon fas fa-handshake"></i>
                                Histórico de Matrículas
                            </a>
                        </li>
                         
                
                
            <div class="nav-section">
                    <h3 class="nav-section-title">Financeiro</h3>
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-section="mudar">
                                <i class="fas fa-dollar-sign"></i>
                                Receitas Financeira
                            </a>
                        </li>


                          <a href="#" class="nav-link active" data-section="mudar">
                                <i class="fas fa-money-bill-wave"></i>
                                Despesas
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-section="mudar">
                                <i class="fas fa-calendar-alt"></i>
                                 Calendário Financeiro
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-section="mudar">
                                <i class="fas fa-bullseye"></i>
                                 Investimentos
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <div class="main-content-wrapper">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <h1 class="page-title" id="page-title">Dashboard</h1>
                    <div class="breadcrumb">
                        <i class="fas fa-home"></i>
                        <span>/ <span id="breadcrumb-current">Dashboard</span></span>
                    </div>
                </div>
                
                <div class="header-right">
                    <div class="header-actions">
                        <button class="notification-btn">
                            <i class="fas fa-bell"></i>
                            <span class="notification-badge">3</span>
                        </button>
                    </div>
                    
                    <div class="user-profile">
                        <div class="user-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="user-info">
                            <div class="user-name">Administrador</div>
                            <div class="user-role">Super Admin</div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Content Area -->
            <main class="content-area">
                <!-- Privacy Policy Section -->
                <div id="privacy-policy" class="section">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-shield-alt"></i>
                                Política de Privacidade
                            </h3>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="privacy-policy-content">Conteúdo da Política de Privacidade</label>
                            <textarea id="privacy-policy-content" class="form-input" rows="20" placeholder="Digite o conteúdo da política de privacidade aqui..."></textarea>
                        </div>
                        <button class="btn btn-primary" id="publish-privacy-policy-button">
                            <i class="fas fa-paper-plane"></i>
                            Publicar Política
                        </button>
                        <div id="privacy-policy-message" class="message" style="display: none;"></div>
                        
                        <!-- Área de exibição da política formatada -->
                        <div style="margin-top: var(--spacing-xl); border-top: 1px solid var(--border-color); padding-top: var(--spacing-lg);">
                            <h4 style="color: var(--text-primary); margin-bottom: var(--spacing-md);">
                                <i class="fas fa-eye"></i>
                                Visualização da Política Publicada
                            </h4>
                            <div id="privacy-policy-display" class="privacy-policy-content" style="background: var(--tertiary-bg); border: 1px solid var(--border-color); border-radius: var(--radius-md); padding: var(--spacing-lg); min-height: 200px; color: var(--text-secondary);">
                                <p style="text-align: center; color: var(--text-muted); padding: var(--spacing-xl);">
                                    Nenhuma política de privacidade publicada ainda.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Dashboard Section -->
                <div id="dashboard" class="section active">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-book"></i>
                            </div>
                            <div class="stat-value" id="total-courses">0</div>
                            <div class="stat-label">Total de Cursos</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-value" id="total-students">0</div>
                            <div class="stat-label">Alunos Ativos</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-play-circle"></i>
                            </div>
                            <div class="stat-value" id="total-videos">0</div>
                            <div class="stat-label">Vídeos Disponíveis</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="stat-value">98%</div>
                            <div class="stat-label">Taxa de Satisfação</div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-tachometer-alt"></i>
                                Visão Geral do Sistema
                            </h3>
                        </div>
                        <p style="color: var(--text-secondary); line-height: 1.6;">
                            Bem-vindo ao painel administrativo da Allay Profissões. Aqui você pode gerenciar cursos, 
                            alunos, matrículas e acompanhar o desempenho da plataforma. Use o menu lateral para 
                            navegar entre as diferentes seções do sistema.
                        </p>
                    </div>
                </div>

                <!-- Courses Section -->
                <div id="courses" class="section">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-plus-circle"></i>
                                Criar Novo Curso
                            </h3>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="course-name-input">Nome do Curso</label>
                            <input type="text" id="course-name-input" class="form-input" placeholder="Ex: Curso de Desenvolvimento Web">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="course-value-input">Valor em Reais (R$)</label>
                            <input type="number" id="course-value-input" class="form-input" placeholder="Ex: 199.90" step="0.01">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="course-workload-input">Carga Horária (horas)</label>
                            <input type="number" id="course-workload-input" class="form-input" placeholder="Ex: 40">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="course-description-input">Descrição do Curso</label>
                            <textarea id="course-description-input" class="form-input" placeholder="Uma breve descrição sobre o curso..." rows="4"></textarea>
                        </div>
                        <button class="btn btn-primary" id="add-course-button">
                            <i class="fas fa-plus"></i>
                            Adicionar Curso
                        </button>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-edit"></i>
                                Editar Curso Existente
                            </h3>
                        </div>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label" for="course-select">Selecionar Curso</label>
                                <select id="course-select" class="form-select">
                                    <option value="">Escolha um curso...</option>
                                </select>
                            </div>
                        </div>
                        <div class="card-actions">
                            <button class="btn btn-primary" id="select-course-button">
                                <i class="fas fa-download"></i>
                                Carregar Curso
                            </button>
                            <button class="btn btn-danger" id="delete-course-button">
                                <i class="fas fa-trash"></i>
                                Excluir Curso
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-layer-group"></i>
                                Módulos e Vídeos: <span id="current-course-name" style="color: var(--accent-blue);">Nenhum Curso Selecionado</span>
                            </h3>
                            <div class="card-actions">
                                <button class="btn btn-primary" id="add-module-button">
                                    <i class="fas fa-plus"></i>
                                    Adicionar Módulo
                                </button>
                                <button class="btn btn-success" id="save-course-data">
                                    <i class="fas fa-save"></i>
                                    Salvar Curso
                                </button>
                            </div>
                        </div>
                        <div id="modules-container">
                            <!-- Modules will be dynamically added here -->
                        </div>
                        <div id="courses-message" class="message" style="display: none;"></div>
                    </div>
                </div>

                <!-- Notifications Section -->
                <div id="notifications" class="section">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-bell"></i>
                                Criar Nova Notificação
                            </h3>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="notification-title-input">Título da Notificação</label>
                            <input type="text" id="notification-title-input" class="form-input" placeholder="Ex: Atualização importante do sistema">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="notification-content-input">Conteúdo da Notificação</label>
                            <textarea id="notification-content-input" class="form-input" placeholder="Digite o conteúdo da notificação..." rows="6"></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="notification-priority-select">Prioridade</label>
                            <select id="notification-priority-select" class="form-select">
                                <option value="normal">Normal</option>
                                <option value="importante">Importante</option>
                                <option value="urgente">Urgente</option>
                            </select>
                        </div>
                        <button class="btn btn-primary" id="publish-notification-button">
                            <i class="fas fa-paper-plane"></i>
                            Publicar Notificação
                        </button>
                        <div id="notifications-message" class="message" style="display: none;"></div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-list"></i>
                                Notificações Publicadas
                            </h3>
                            <div class="card-actions">
                                <button class="btn btn-secondary" onclick="loadNotifications()">
                                    <i class="fas fa-sync-alt"></i>
                                    Atualizar Lista
                                </button>
                            </div>
                        </div>
                        <div id="notifications-list" class="student-list">
                            <!-- Notifications will be dynamically added here -->
                        </div>
                    </div>
                </div>

                <!-- Enrollment Section -->
                <div id="enrollment" class="section">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-user-plus"></i>
                                Cadastrar Novo Aluno
                            </h3>
                            <p style="color: var(--text-secondary); margin: 0; font-size: var(--font-size-sm);">
                                Preencha todos os campos para criar uma nova conta de aluno
                            </p>
                        </div>
                        
                        <!-- Dados Pessoais -->
                        <div style="margin-bottom: var(--spacing-xl);">
                            <h4 style="color: var(--text-primary); margin-bottom: var(--spacing-lg); display: flex; align-items: center; gap: var(--spacing-sm);">
                                <i class="fas fa-user" style="color: var(--accent-blue);"></i>
                                Dados Pessoais
                            </h4>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label class="form-label" for="student-name-input">
                                        <i class="fas fa-user" style="margin-right: var(--spacing-xs);"></i>
                                        Nome Completo *
                                    </label>
                                    <input type="text" id="student-name-input" class="form-input" placeholder="Ex: João Silva Santos" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="student-cpf-input">
                                        <i class="fas fa-id-card" style="margin-right: var(--spacing-xs);"></i>
                                        CPF *
                                    </label>
                                    <input type="text" id="student-cpf-input" class="form-input" placeholder="000.000.000-00" maxlength="14" required>
                                    <small style="color: var(--text-muted); font-size: var(--font-size-xs); margin-top: var(--spacing-xs); display: block;">
                                        Digite apenas números, a formatação será aplicada automaticamente
                                    </small>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="student-phone-input">
                                        <i class="fas fa-phone" style="margin-right: var(--spacing-xs);"></i>
                                        Número de Telefone *
                                    </label>
                                    <input type="tel" id="student-phone-input" class="form-input" placeholder="(11) 99999-9999" maxlength="15" required>
                                    <small style="color: var(--text-muted); font-size: var(--font-size-xs); margin-top: var(--spacing-xs); display: block;">
                                        Inclua o DDD. Ex: (11) 99999-9999
                                    </small>
                                </div>
                            </div>
                        </div>

                        <!-- Dados de Acesso -->
                        <div style="margin-bottom: var(--spacing-xl);">
                            <h4 style="color: var(--text-primary); margin-bottom: var(--spacing-lg); display: flex; align-items: center; gap: var(--spacing-sm);">
                                <i class="fas fa-key" style="color: var(--accent-blue);"></i>
                                Dados de Acesso
                            </h4>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label class="form-label" for="student-email-input">
                                        <i class="fas fa-envelope" style="margin-right: var(--spacing-xs);"></i>
                                        Email *
                                    </label>
                                    <input type="email" id="student-email-input" class="form-input" placeholder="Ex: joao@email.com" required>
                                    <small style="color: var(--text-muted); font-size: var(--font-size-xs); margin-top: var(--spacing-xs); display: block;">
                                        Este será o login do aluno na plataforma
                                    </small>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="student-password-input">
                                        <i class="fas fa-lock" style="margin-right: var(--spacing-xs);"></i>
                                        Senha *
                                    </label>
                                    <input type="password" id="student-password-input" class="form-input" placeholder="Mínimo 6 caracteres" required>
                                    <small style="color: var(--text-muted); font-size: var(--font-size-xs); margin-top: var(--spacing-xs); display: block;">
                                        A senha deve ter pelo menos 6 caracteres
                                    </small>
                                </div>
                            </div>
                        </div>

                        <!-- Botão de Cadastro -->
                        <div style="display: flex; justify-content: flex-end; gap: var(--spacing-md); padding-top: var(--spacing-lg); border-top: 1px solid var(--border-color);">
                            <button type="button" class="btn btn-secondary" onclick="clearEnrollmentForm()">
                                <i class="fas fa-times"></i>
                                Limpar Formulário
                            </button>
                            <button class="btn btn-success" id="add-student-button">
                                <i class="fas fa-user-plus"></i>
                                Cadastrar Aluno
                            </button>
                        </div>
                        
                        <div id="enrollment-message" class="message" style="display: none;"></div>
                    </div>
                </div>

                <!-- Students Section -->
                <div id="students" class="section">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-users"></i>
                                Lista de Alunos
                            </h3>
                            <div class="card-actions">
                                <button class="btn btn-secondary" onclick="loadStudents()">
                                    <i class="fas fa-sync-alt"></i>
                                    Atualizar Lista
                                </button>
                            </div>
                        </div>
                        
                        <!-- Search Bar -->
                        <div style="margin-bottom: var(--spacing-lg); padding: 0 var(--spacing-lg);">
                            <div class="form-group" style="margin-bottom: 0;">
                                <label class="form-label" for="student-search-input">
                                    <i class="fas fa-search" style="margin-right: var(--spacing-xs);"></i>
                                    Pesquisar Aluno
                                </label>
                                <input type="text" id="student-search-input" class="form-input" placeholder="Digite o nome ou CPF do aluno..." onkeyup="filterStudents()">
                                <small style="color: var(--text-muted); font-size: var(--font-size-xs); margin-top: var(--spacing-xs); display: block;">
                                    Digite para pesquisar por nome ou CPF em tempo real
                                </small>
                            </div>
                        </div>
                        
                        <div id="students-list" class="student-list">
                            <!-- Students will be dynamically added here -->
                        </div>
                        <div id="students-message" class="message" style="display: none;"></div>
                    </div>
                </div>

                <!-- Indications History Section -->
                <div id="indications-history" class="section">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-handshake"></i>
                                Histórico de Indicações
                            </h3>
                            <div class="card-actions">
                                <button class="btn btn-primary" id="add-indication-button">
                                    <i class="fas fa-plus"></i>
                                    Adicionar Indicação
                                </button>
                                <button class="btn btn-secondary" onclick="loadIndications()">
                                    <i class="fas fa-sync-alt"></i>
                                    Atualizar Lista
                                </button>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Aluno Indicador</th>
                                        <th>Aluno Indicado</th>
                                        <th>Curso</th>
                                        <th>Data de Indicação</th>
                                        <th>Status</th>
                                        <th>Pontos</th>
                                        <th>Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="indications-tbody">
                                    <!-- Indicações serão carregadas dinamicamente aqui -->
                                </tbody>
                            </table>
                        </div>
                        <div id="indications-message" class="message" style="display: none;"></div>
                    </div>
                </div>

                <!-- Support Settings Section -->
                <div id="support-settings" class="section">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-headset"></i>
                                Configurações de Contato para Suporte
                            </h3>
                        </div>
                        <div class="support-settings-container">
                            <!-- WhatsApp Numbers -->
                            <div class="card">
                                <div class="card-header">
                                    <h4 class="card-title">
                                        <i class="fab fa-whatsapp"></i>
                                        Números de WhatsApp
                                    </h4>
                                    <div class="card-actions">
                                        <button class="btn btn-primary btn-sm" id="add-whatsapp-number">
                                            <i class="fas fa-plus"></i>
                                            Adicionar Número
                                        </button>
                                    </div>
                                </div>
                                <div id="whatsapp-numbers-container">
                                    <!-- WhatsApp numbers will be dynamically added here -->
                                </div>
                            </div>

                            <!-- Email Address -->
                            <div class="card">
                                <div class="card-header">
                                    <h4 class="card-title">
                                        <i class="fas fa-envelope"></i>
                                        Endereço de Email
                                    </h4>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="support-email-input">Email de Suporte</label>
                                    <input type="email" id="support-email-input" class="form-input" placeholder="Ex: suporte@allayprofissoes.com">
                                </div>
                            </div>
                        </div>
                        <div class="card-actions" style="justify-content: flex-end; margin-top: var(--spacing-lg);">
                            <button class="btn btn-success" id="save-support-settings">
                                <i class="fas fa-save"></i>
                                Salvar Configurações
                            </button>
                        </div>
                        <div id="support-settings-message" class="message" style="display: none;"></div>
                    </div>
                </div>

                <!-- Settings Section -->
                <div id="settings" class="section">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-cog"></i>
                                Configurações do Sistema
                            </h3>
                        </div>
                        <p style="color: var(--text-secondary);">
                            Seção em desenvolvimento. Aqui você poderá configurar parâmetros gerais do sistema, 
                            notificações, integrações e outras configurações avançadas.
                        </p>
                    </div>
                </div>

                <!-- Analytics Section -->
                <div id="analytics" class="section">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-chart-bar"></i>
                                Relatórios e Analytics
                            </h3>
                        </div>
                        <p style="color: var(--text-secondary);">
                            Seção em desenvolvimento. Aqui você poderá visualizar relatórios detalhados sobre 
                            o desempenho dos alunos, estatísticas de uso da plataforma e métricas de engajamento.
                        </p>
                    </div>
                </div>

                <!-- Materials Section -->
                <div id="materials" class="section">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-folder-open"></i>
                                Gestão de Materiais
                            </h3>
                        </div>
                        
                        <!-- Upload Area -->
                        <div class="upload-area" id="upload-area">
                            <div class="upload-icon">
                                <i class="fas fa-cloud-upload-alt"></i>
                            </div>
                            <div class="upload-text">Clique aqui ou arraste ficheiros para fazer upload</div>
                            <div class="upload-subtext">Formatos suportados: PDF, DOC, DOCX, PPT, PPTX, XLS, XLSX, ZIP, RAR, MP4, AVI, MOV</div>
                            <input type="file" id="file-input" class="file-input" multiple accept=".pdf,.doc,.docx,.ppt,.pptx,.xls,.xlsx,.zip,.rar,.mp4,.avi,.mov">
                        </div>
                        
                        <!-- Folder Management -->
                        <div style="margin: var(--spacing-lg) 0;">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label class="form-label" for="folder-name-input">
                                        <i class="fas fa-folder-plus" style="margin-right: var(--spacing-xs);"></i>
                                        Criar Nova Pasta
                                    </label>
                                    <div style="display: flex; gap: var(--spacing-sm);">
                                        <input type="text" id="folder-name-input" class="form-input" placeholder="Nome da pasta" style="flex: 1;">
                                        <button type="button" id="create-folder-btn" class="btn btn-primary">
                                            <i class="fas fa-folder-plus"></i>
                                            Criar
                                        </button>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="folder-select">
                                        <i class="fas fa-folder" style="margin-right: var(--spacing-xs);"></i>
                                        Pasta de Destino
                                    </label>
                                    <select id="folder-select" class="form-select">
                                        <option value="">Pasta raiz</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Progress Bar -->
                        <div id="upload-progress-container" style="display: none; margin: var(--spacing-lg) 0;">
                            <div class="upload-progress">
                                <div class="upload-progress-bar" id="upload-progress-bar"></div>
                            </div>
                            <div class="upload-status" id="upload-status">Preparando upload...</div>
                        </div>
                        
                        <!-- File List -->
                        <div id="files-container" style="margin-top: var(--spacing-lg);">
                            <h4 style="color: var(--text-primary); margin-bottom: var(--spacing-md); display: flex; align-items: center; gap: var(--spacing-sm);">
                                <i class="fas fa-list" style="color: var(--accent-blue);"></i>
                                Ficheiros e Pastas
                            </h4>
                            <div id="files-list" style="min-height: 200px; border: 1px solid var(--border-color); border-radius: var(--radius-md); padding: var(--spacing-md); background: var(--tertiary-bg);">
                                <p style="text-align: center; color: var(--text-muted); padding: var(--spacing-xl);">
                                    Nenhum ficheiro ou pasta encontrado. Faça upload de ficheiros ou crie uma pasta para começar.
                                </p>
                            </div>
                        </div>
                        
                        <div id="materials-message" class="message" style="display: none;"></div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Modal for Course Assignment -->
    <div id="assign-course-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Atribuir Curso ao Aluno</h3>
            </div>
            <p style="color: var(--text-secondary); margin-bottom: var(--spacing-lg);">
                Aluno: <strong id="modal-student-name" style="color: var(--text-primary);"></strong>
            </p>
            <div class="form-group">
                <label class="form-label" for="modal-course-select">Selecionar Curso</label>
                <select id="modal-course-select" class="form-select">
                    <option value="">Escolha um curso...</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label" for="modal-media-source">Mídia de Origem</label>
                <select id="modal-media-source" class="form-select">
                    <option value="">Selecione a mídia...</option>
                    <option value="Facebook">Facebook</option>
                    <option value="Instagram">Instagram</option>
                    <option value="Google">Google</option>
                    <option value="Indicacao">Indicação</option>
                    <option value="Outro">Outro</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label" for="modal-payment-method">Método de Pagamento</label>
                <select id="modal-payment-method" class="form-select">
                    <option value="">Selecione o método...</option>
                    <option value="Pix">Pix</option>
                    <option value="Dinheiro">Dinheiro</option>
                    <option value="Cartao">Cartão</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label" for="modal-discount-value">Valor do Desconto (R$)</label>
                <input type="number" id="modal-discount-value" class="form-input" placeholder="Ex: 50.00" step="0.01">
            </div>
            <div class="form-group">
                <label class="form-label" for="modal-final-value">Valor Final (R$)</label>
                <input type="number" id="modal-final-value" class="form-input" placeholder="Calculado automaticamente" step="0.01" readonly>
            </div>
            
            <!-- Seção de Indicação -->
            <div class="form-group">
                <label class="form-label">Houve Indicação?</label>
                <div style="display: flex; gap: var(--spacing-md); margin-top: var(--spacing-xs);">
                    <label style="display: flex; align-items: center; gap: var(--spacing-xs); cursor: pointer;">
                        <input type="radio" name="indication-option" value="nao" id="indication-no" checked>
                        <span>Não</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: var(--spacing-xs); cursor: pointer;">
                        <input type="radio" name="indication-option" value="sim" id="indication-yes">
                        <span>Sim</span>
                    </label>
                </div>
            </div>
            
            <!-- Container de busca de indicador (inicialmente oculto) -->
            <div id="indication-search-container" class="form-group" style="display: none;">
                <label class="form-label" for="indication-search-input">
                    <i class="fas fa-search" style="margin-right: var(--spacing-xs);"></i>
                    Buscar Aluno Indicador
                </label>
                <input type="text" id="indication-search-input" class="form-input" placeholder="Digite o nome ou CPF do aluno indicador..." onkeyup="searchIndicatingStudent()">
                <small style="color: var(--text-muted); font-size: var(--font-size-xs); margin-top: var(--spacing-xs); display: block;">
                    Digite para buscar por nome ou CPF em tempo real
                </small>
                
                <!-- Lista de resultados da busca -->
                <div id="indication-search-results" style="max-height: 200px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: var(--radius-md); margin-top: var(--spacing-sm); background: var(--tertiary-bg); display: none;">
                    <!-- Resultados da busca serão exibidos aqui -->
                </div>
                
                <!-- Campo oculto para armazenar o email do indicador selecionado -->
                <input type="hidden" id="selected-indicator-email" value="">
            </div>
            
            <!-- Campo para exibir o bônus de indicação -->
            <div id="indication-bonus-container" class="form-group" style="display: none;">
                <label class="form-label" for="indication-bonus-value">Bônus de Indicação (10% do valor final)</label>
                <input type="number" id="indication-bonus-value" class="form-input" placeholder="Calculado automaticamente" step="0.01" readonly style="background: var(--success-green); color: white; font-weight: bold;">
            </div>
            <div class="modal-actions">
                <button class="btn btn-success" id="assign-course-confirm">
                    <i class="fas fa-check"></i>
                    Atribuir Curso
                </button>
                <button class="btn btn-secondary" id="assign-course-cancel">
                    <i class="fas fa-times"></i>
                    Cancelar
                </button>
            </div>
        </div>
    </div>

    <!-- Modal for Student Profile -->
    <div id="student-profile-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Perfil do Aluno</h3>
            </div>
            <p style="color: var(--text-secondary); margin-bottom: var(--spacing-lg);">
                Visualizando perfil de: <strong id="profile-modal-student-email" style="color: var(--text-primary);"></strong>
            </p>
            
            <!-- Informações Editáveis -->
            <div class="form-group">
                <label class="form-label" for="profile-student-name">Nome Completo</label>
                <input type="text" id="profile-student-name" class="form-input" placeholder="Ex: João Silva Santos">
            </div>
            <div class="form-group">
                <label class="form-label" for="profile-student-phone">Telefone</label>
                <input type="tel" id="profile-student-phone" class="form-input" placeholder="(11) 99999-9999">
            </div>
            <div class="form-group">
                <label class="form-label" for="profile-student-cpf">CPF</label>
                <input type="text" id="profile-student-cpf" class="form-input" placeholder="000.000.000-00">
            </div>
            
            <!-- Informações Não Editáveis -->
            <div class="form-group">
                <label class="form-label">Email (não editável)</label>
                <input type="email" id="profile-student-email-display" class="form-input" readonly style="background: var(--primary-bg); opacity: 0.7;">
            </div>
            
            <!-- Cursos Atribuídos -->
            <div class="form-group">
                <label class="form-label">Cursos Atribuídos</label>
                <div id="profile-assigned-courses" style="padding: var(--spacing-md); background: var(--tertiary-bg); border-radius: var(--radius-md); min-height: 50px;">
                    <!-- Courses will be displayed here -->
                </div>
            </div>
            
            <div style="margin-top: var(--spacing-lg); padding: var(--spacing-md); background: var(--tertiary-bg); border-radius: var(--radius-md);">
                <p style="color: var(--text-secondary); font-size: var(--font-size-sm); margin: 0;">
                    <i class="fas fa-info-circle" style="color: var(--accent-blue);"></i>
                    As alterações serão salvas no banco de dados. Email e senha não podem ser editados por aqui.
                </p>
            </div>
            
            <!-- Ações do Modal -->
            <div class="modal-actions">
                <button class="btn btn-warning" id="profile-save-changes">
                    <i class="fas fa-save"></i>
                    Salvar Alterações
                </button>
                <button class="btn btn-primary" id="profile-assign-course">
                    <i class="fas fa-book"></i>
                    Atribuir Curso
                </button>
                <button class="btn btn-secondary" id="profile-remove-course">
                    <i class="fas fa-minus-circle"></i>
                    Remover Curso
                </button>
                <button class="btn btn-danger" id="profile-remove-student">
                    <i class="fas fa-trash"></i>
                    Remover Aluno
                </button>
                <button class="btn btn-secondary" id="profile-close">
                    <i class="fas fa-times"></i>
                    Fechar
                </button>
            </div>
        </div>
    </div>

    <!-- Modal for Remove Course -->
    <div id="remove-course-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Remover Curso do Aluno</h3>
            </div>
            <p style="color: var(--text-secondary); margin-bottom: var(--spacing-lg);">
                Aluno: <strong id="remove-modal-student-name" style="color: var(--text-primary);"></strong>
            </p>
            <div class="form-group">
                <label class="form-label">Selecionar Cursos para Remover</label>
                <div id="remove-courses-list" style="max-height: 300px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: var(--radius-md); padding: var(--spacing-md); background: var(--tertiary-bg);">
                    <!-- Student's courses checkboxes will be dynamically added here -->
                </div>
            </div>
            <div style="margin-top: var(--spacing-lg); padding: var(--spacing-md); background: var(--error-red); border-radius: var(--radius-md); opacity: 0.1;">
                <p style="color: var(--text-primary); font-size: var(--font-size-sm); margin: 0;">
                    <i class="fas fa-exclamation-triangle" style="color: var(--warning-yellow);"></i>
                    Atenção: Esta ação removerá permanentemente os cursos selecionados do aluno. Esta operação não pode ser desfeita.
                </p>
            </div>
            <div class="modal-actions">
                <button class="btn btn-danger" id="remove-course-confirm">
                    <i class="fas fa-minus-circle"></i>
                    Remover Cursos Selecionados
                </button>
                <button class="btn btn-secondary" id="remove-course-cancel">
                    <i class="fas fa-times"></i>
                    Cancelar
                </button>
            </div>
        </div>
    </div>

    <!-- Modal for Add Indication -->
    <div id="add-indication-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Adicionar Nova Indicação</h3>
            </div>
            <div class="form-group">
                <label class="form-label" for="indicator-student-search">Aluno Indicador</label>
                <input type="text" id="indicator-student-search" class="form-input" placeholder="Buscar por nome ou CPF..." onkeyup="searchStudentsForIndication("indicator")">
                <div id="indicator-student-results" class="search-results-list" style="display: none;"></div>
                <input type="hidden" id="selected-indicator-email">
            </div>
            <div class="form-group">
                <label class="form-label" for="indicated-student-search">Aluno Indicado</label>
                <input type="text" id="indicated-student-search" class="form-input" placeholder="Buscar por nome ou CPF..." onkeyup="searchStudentsForIndication("indicated")">
                <div id="indicated-student-results" class="search-results-list" style="display: none;"></div>
                <input type="hidden" id="selected-indicated-email">
            </div>
            <div class="form-group">
                <label class="form-label" for="indication-course-select">Curso</label>
                <select id="indication-course-select" class="form-select">
                    <option value="">Selecione o curso...</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label" for="indication-date">Data de Indicação</label>
                <input type="date" id="indication-date" class="form-input">
            </div>
            <div class="form-group">
                <label class="form-label" for="indication-status-select">Status</label>
                <select id="indication-status-select" class="form-select">
                    <option value="pending">Pendente</option>
                    <option value="approved">Aprovado</option>
                    <option value="rejected">Não Aprovado</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label" for="indication-points">Pontos (se aprovado)</label>
                <input type="number" id="indication-points" class="form-input" placeholder="Ex: 10.00" step="0.01">
            </div>
            <div class="modal-actions">
                <button class="btn btn-success" id="save-indication-button">
                    <i class="fas fa-save"></i>
                    Salvar Indicação
                </button>
                <button class="btn btn-secondary" id="cancel-add-indication-button">
                    <i class="fas fa-times"></i>
                    Cancelar
                </button>
            </div>
        </div>
    </div>

    <!-- Modal for Material Upload -->
    <div id="material-upload-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Adicionar Material Complementar</h3>
            </div>
            <p style="color: var(--text-secondary); margin-bottom: var(--spacing-lg);">
                Módulo: <strong id="upload-modal-module-name" style="color: var(--text-primary);"></strong>
            </p>
            
            <div class="upload-area" id="upload-area">
                <div class="upload-icon">
                    <i class="fas fa-cloud-upload-alt"></i>
                </div>
                <div class="upload-text">Clique aqui ou arraste arquivos para fazer upload</div>
                <div class="upload-subtext">Formatos suportados: PDF, DOC, DOCX, PPT, PPTX, XLS, XLSX, ZIP, RAR</div>
                <input type="file" id="file-input" class="file-input" multiple accept=".pdf,.doc,.docx,.ppt,.pptx,.xls,.xlsx,.zip,.rar">
            </div>
            
            <!-- Área para criar pastas -->
            <div style="margin: var(--spacing-md) 0;">
                <label style="display: block; margin-bottom: var(--spacing-sm); color: var(--text-primary); font-weight: 500;">
                    Pasta de destino:
                </label>
                <div style="display: flex; gap: var(--spacing-sm);">
                    <input type="text" id="folder-name-input" placeholder="Digite o nome da nova pasta" 
                           style="flex: 1; padding: var(--spacing-sm); border: 1px solid var(--border-color); border-radius: var(--border-radius); background: var(--input-bg); color: var(--quartiary);">
                    <button type="button" id="create-folder-btn" class="btn btn-primary" style="white-space: nowrap;">
                        <i class="fas fa-folder-plus"></i> Criar Pasta
                    </button>
                </div>
                <select id="folder-select" style="width: 100%; margin-top: var(--spacing-sm); padding: var(--spacing-sm); border: 1px solid var(--border-color); border-radius: var(--border-radius); background: var(--input-bg); color: var(--quartiary); background-color:(--accent-blue-hover);">
                    <option value="">Pasta raiz</option>
                </select>
            </div>
            
            <!-- Lista de arquivos selecionados -->
            <div id="selected-files-container" style="display: none; margin: var(--spacing-md) 0;">
                <h4 style="color: var(--shadow-heavy); margin-bottom: var(--spacing-sm);">Arquivos selecionados:</h4>
                <div id="selected-files-list" style="max-height: 150px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: var(--border-radius); padding: var(--spacing-sm); background: var(--accent-blue-hover);">
                </div>
            </div>
            
            <div id="upload-progress-container" style="display: none;">
                <div class="upload-progress">
                    <div class="upload-progress-bar" id="upload-progress-bar"></div>
                </div>
                <div class="upload-status" id="upload-status">Preparando upload...</div>
            </div>
            
            <div class="modal-actions">
                <button class="btn btn-success" id="upload-confirm" style="display: none;">
                    <i class="fas fa-check"></i>
                    Confirmar Upload
                </button>
                <button class="btn btn-secondary" id="upload-cancel">
                    <i class="fas fa-times"></i>
                    Cancelar
                </button>
            </div>
        </div>
    </div>

<script type="module" src="script.js"></script>
</body>
</html>


